<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Case Study: OCP Violation Detection in Action</title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
      }
      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        padding: 40px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }
      .breadcrumb {
        padding: 12px 20px;
        background: #f8f9fa;
        border-radius: 6px;
        margin-bottom: 30px;
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 14px;
      }
      .breadcrumb a {
        color: #007bff;
        text-decoration: none;
        transition: color 0.2s;
      }
      .breadcrumb a:hover {
        color: #0056b3;
        text-decoration: underline;
      }
      .breadcrumb-separator {
        color: #6c757d;
        margin: 0 4px;
      }
      .breadcrumb-current {
        color: #495057;
        font-weight: 600;
      }
      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 10px;
        font-size: 2.5em;
      }
      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 40px;
        font-size: 1.2em;
      }
      .case-header {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        color: white;
        padding: 30px;
        border-radius: 12px;
        margin-bottom: 30px;
      }
      .case-header h2 {
        margin: 0 0 10px 0;
        font-size: 1.8em;
      }
      .case-header p {
        margin: 0;
        opacity: 0.95;
        line-height: 1.6;
      }
      .timeline {
        position: relative;
        padding-left: 40px;
        margin: 40px 0;
      }
      .timeline::before {
        content: '';
        position: absolute;
        left: 15px;
        top: 0;
        bottom: 0;
        width: 2px;
        background: #dee2e6;
      }
      .timeline-item {
        position: relative;
        margin-bottom: 30px;
      }
      .timeline-item::before {
        content: '';
        position: absolute;
        left: -30px;
        top: 5px;
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #667eea;
        border: 3px solid white;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }
      .timeline-item.error::before {
        background: #dc3545;
      }
      .timeline-item.success::before {
        background: #28a745;
      }
      .timeline-content {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        border-left: 3px solid #667eea;
      }
      .timeline-item.error .timeline-content {
        border-left-color: #dc3545;
        background: #fff5f5;
      }
      .timeline-item.success .timeline-content {
        border-left-color: #28a745;
        background: #f5fff5;
      }
      .code-block {
        background: #1e1e1e;
        color: #d4d4d4;
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        margin: 20px 0;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        line-height: 1.6;
      }
      .code-block .comment {
        color: #6a9955;
      }
      .code-block .keyword {
        color: #569cd6;
      }
      .code-block .string {
        color: #ce9178;
      }
      .code-block .function {
        color: #dcdcaa;
      }
      .code-block .violation {
        background: rgba(255, 0, 0, 0.2);
        border-bottom: 2px wavy red;
      }
      .violation-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }
      .violation-box h3 {
        margin-top: 0;
        color: #856404;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .fix-box {
        background: #d4edda;
        border: 2px solid #28a745;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
      }
      .fix-box h3 {
        margin-top: 0;
        color: #155724;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }
      .comparison-card {
        padding: 20px;
        border-radius: 8px;
        border: 2px solid #dee2e6;
      }
      .comparison-card.before {
        background: #fff5f5;
        border-color: #dc3545;
      }
      .comparison-card.after {
        background: #f5fff5;
        border-color: #28a745;
      }
      .comparison-card h4 {
        margin-top: 0;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .principle-explanation {
        background: #e7f3ff;
        padding: 25px;
        border-radius: 12px;
        border-left: 4px solid #007bff;
        margin: 30px 0;
      }
      .principle-explanation h3 {
        color: #004085;
        margin-top: 0;
      }
      .github-comment {
        background: #f6f8fa;
        border: 1px solid #d1d5da;
        border-radius: 6px;
        padding: 16px;
        margin: 20px 0;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      }
      .github-comment-header {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 12px;
        padding-bottom: 12px;
        border-bottom: 1px solid #e1e4e8;
      }
      .github-avatar {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }
      .github-username {
        font-weight: 600;
        color: #24292e;
      }
      .github-tag {
        background: #0366d6;
        color: white;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 12px;
      }
      .metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }
      .metric-card {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        text-align: center;
      }
      .metric-card .value {
        font-size: 2em;
        font-weight: bold;
        color: #667eea;
      }
      .metric-card .label {
        color: #666;
        margin-top: 5px;
      }
      @media (max-width: 768px) {
        .comparison {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <nav class="breadcrumb" aria-label="Breadcrumb navigation">
        <a href="/">üè† Home</a>
        <span class="breadcrumb-separator">‚Ä∫</span>
        <a href="/#code-review">Quality</a>
        <span class="breadcrumb-separator">‚Ä∫</span>
        <span class="breadcrumb-current">OCP Violation Case Study</span>
      </nav>

      <h1>üîç Case Study: OCP Violation Detection</h1>
      <div class="subtitle">
        How AI caught an Open-Closed Principle violation in production code
      </div>

      <div class="case-header">
        <h2>üìã The Incident</h2>
        <p>
          On September 15, 2025, our automated OCP checker detected a violation in the
          breadcrumb navigation system. The code required modification every time a new
          page was added, violating the Open-Closed Principle. Here's how our AI-powered
          system caught and helped fix the issue.
        </p>
      </div>

      <div class="principle-explanation">
        <h3>üìö The Open-Closed Principle (OCP)</h3>
        <p>
          <strong>Definition:</strong> Software entities (classes, modules, functions)
          should be <em>open for extension</em> but <em>closed for modification</em>.
        </p>
        <p>
          <strong>In Practice:</strong> You should be able to add new functionality
          without changing existing code. This reduces bugs, makes code more
          maintainable, and prevents breaking changes.
        </p>
      </div>

      <div class="timeline">
        <div class="timeline-item">
          <div class="timeline-content">
            <h4>üöÄ Pull Request #11 Created</h4>
            <p>Developer pushed changes to add dynamic breadcrumb navigation</p>
            <small>September 15, 2025 - 11:15 AM</small>
          </div>
        </div>

        <div class="timeline-item error">
          <div class="timeline-content">
            <h4>‚ùå OCP Violation Detected</h4>
            <p>GitHub Action triggered, AI analysis found violation</p>
            <small>September 15, 2025 - 11:17 AM</small>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-content">
            <h4>üí¨ AI Posts Analysis</h4>
            <p>Detailed explanation and fix suggestions provided</p>
            <small>September 15, 2025 - 11:18 AM</small>
          </div>
        </div>

        <div class="timeline-item success">
          <div class="timeline-content">
            <h4>‚úÖ Fix Implemented</h4>
            <p>Developer refactored code using Registry Pattern</p>
            <small>September 15, 2025 - 11:45 AM</small>
          </div>
        </div>
      </div>

      <h2>üö® The Violation</h2>

      <div class="violation-box">
        <h3>‚ö†Ô∏è What Was Wrong</h3>
        <p>
          The original code had a hardcoded object that needed modification every time a
          new page was added:
        </p>
      </div>

      <div class="code-block">
        <span class="comment">// breadcrumb-navigation.js - BEFORE (Violates OCP)</span>

        <span class="keyword">const</span> <span class="function">pageMetadata</span> =
        { <span class="violation">'ci-cd-pipeline.html'</span>: { title:
        <span class="string">'CI/CD Pipeline'</span>, parent:
        <span class="string">'Documentation'</span>, parentUrl:
        <span class="string">'/#doc-driven'</span>
        },
        <span class="violation">'custom-linters.html'</span>: { title:
        <span class="string">'Custom Linters'</span>, parent:
        <span class="string">'Quality'</span>, parentUrl:
        <span class="string">'/#custom-linting'</span>
        },
        <span class="violation">'set-standards.html'</span>: { title:
        <span class="string">'Standards Guide'</span>, parent:
        <span class="string">'Quality'</span>, parentUrl:
        <span class="string">'/#set-standards'</span>
        }
        <span class="comment">// ‚ùå Must modify this object for every new page!</span>
        };
      </div>

      <h2>ü§ñ AI Analysis Output</h2>

      <div class="github-comment">
        <div class="github-comment-header">
          <div class="github-avatar">AI</div>
          <span class="github-username">github-actions[bot]</span>
          <span class="github-tag">OCP Checker</span>
        </div>
        <h3>‚ö†Ô∏è Open-Closed Principle Violation Detected</h3>

        <p>
          <strong>File:</strong>
          <code>durable-code-app/frontend/public/breadcrumb-navigation.js</code>
        </p>

        <h4>üìä Violation Details:</h4>
        <ul>
          <li><strong>Type:</strong> Hardcoded Configuration Object</li>
          <li><strong>Severity:</strong> Medium</li>
          <li><strong>Lines:</strong> 15-31</li>
        </ul>

        <h4>üîç Analysis:</h4>
        <p>The <code>pageMetadata</code> object violates OCP because:</p>
        <ol>
          <li>Adding new pages requires modifying the existing object</li>
          <li>No extension mechanism exists for external code</li>
          <li>Changes risk breaking existing page configurations</li>
        </ol>

        <h4>üí° Suggested Fix:</h4>
        <p>Implement a Registry Pattern to allow dynamic page registration:</p>
        <pre><code>class PageRegistry {
    register(page, metadata) { /* ... */ }
    get(page) { /* ... */ }
}

// External code can now extend without modification:
registry.register('new-page.html', { /* ... */ });</code></pre>

        <h4>üìö Learn More:</h4>
        <p>
          See
          <a href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle"
            >Open-Closed Principle documentation</a
          >
        </p>
      </div>

      <h2>‚úÖ The Solution</h2>

      <div class="fix-box">
        <h3>üîß How It Was Fixed</h3>
        <p>
          The code was refactored to use a Registry Pattern, making it open for
          extension but closed for modification:
        </p>
      </div>

      <div class="comparison">
        <div class="comparison-card before">
          <h4>‚ùå Before (Violates OCP)</h4>
          <ul>
            <li>Hardcoded object literal</li>
            <li>Must modify for new pages</li>
            <li>No extension mechanism</li>
            <li>Risk of breaking changes</li>
          </ul>
        </div>
        <div class="comparison-card after">
          <h4>‚úÖ After (Follows OCP)</h4>
          <ul>
            <li>Registry pattern</li>
            <li>Dynamic registration API</li>
            <li>External extensibility</li>
            <li>Core code unchanged</li>
          </ul>
        </div>
      </div>

      <div class="code-block">
        <span class="comment">// breadcrumb-navigation.js - AFTER (Follows OCP)</span>

        <span class="keyword">class</span> <span class="function">PageRegistry</span> {
        <span class="keyword">constructor</span>() {
        <span class="keyword">this</span>.pages =
        <span class="keyword">new</span> Map(); }

        <span class="function">register</span>(pageName, metadata) {
        <span class="keyword">this</span>.pages.set(pageName, metadata);
        <span class="keyword">return this</span>;
        <span class="comment">// Fluent interface</span>
        }

        <span class="function">get</span>(pageName) {
        <span class="keyword">return this</span>.pages.get(pageName); } }

        <span class="comment"
          >// ‚úÖ Now external code can add pages without modification!</span
        >
        <span class="keyword">window</span>.breadcrumbRegistry =
        <span class="keyword">new</span> PageRegistry() .register(<span class="string"
          >'ci-cd-pipeline.html'</span
        >, { <span class="comment">/* ... */</span> }) .register(<span class="string"
          >'custom-linters.html'</span
        >, { <span class="comment">/* ... */</span> }) .register(<span class="string"
          >'set-standards.html'</span
        >, { <span class="comment">/* ... */</span> });

        <span class="comment">// External code can now extend:</span>
        <span class="comment"
          >// window.breadcrumbRegistry.register('new-page.html', { ... });</span
        >
      </div>

      <h2>üìä Impact Metrics</h2>

      <div class="metrics">
        <div class="metric-card">
          <div class="value">3 min</div>
          <div class="label">Detection Time</div>
        </div>
        <div class="metric-card">
          <div class="value">30 min</div>
          <div class="label">Time to Fix</div>
        </div>
        <div class="metric-card">
          <div class="value">0</div>
          <div class="label">Breaking Changes</div>
        </div>
        <div class="metric-card">
          <div class="value">100%</div>
          <div class="label">Backward Compatible</div>
        </div>
      </div>

      <h2>üéØ Key Takeaways</h2>

      <div class="principle-explanation">
        <h3>üìù Lessons Learned</h3>
        <ol>
          <li>
            <strong>Early Detection:</strong> AI caught the violation before merge,
            preventing technical debt
          </li>
          <li>
            <strong>Educational Value:</strong> The detailed explanation helped the team
            understand OCP better
          </li>
          <li>
            <strong>Pattern Recognition:</strong> AI identified the Registry Pattern as
            the optimal solution
          </li>
          <li>
            <strong>Time Savings:</strong> Automated detection saved hours of manual
            code review
          </li>
          <li>
            <strong>Quality Improvement:</strong> The refactored code is more
            maintainable and extensible
          </li>
        </ol>
      </div>

      <div class="fix-box">
        <h3>üöÄ Benefits of the Fix</h3>
        <ul>
          <li>
            <strong>Extensibility:</strong> New pages can be added without touching core
            code
          </li>
          <li>
            <strong>Maintainability:</strong> Reduced risk of breaking existing
            functionality
          </li>
          <li>
            <strong>Testability:</strong> Registry can be easily mocked and tested
          </li>
          <li><strong>Documentation:</strong> Clear API for page registration</li>
          <li>
            <strong>Future-Proof:</strong> Can easily add features like validation or
            metadata inheritance
          </li>
        </ul>
      </div>

      <div
        class="principle-explanation"
        style="background: #fff3cd; border-left-color: #ffc107"
      >
        <h3>‚ö° Try It Yourself</h3>
        <p>
          Want to see OCP checking in action? Our GitHub Action runs on every pull
          request:
        </p>
        <ol>
          <li>
            Create a PR with code that violates OCP (hardcoded switch statements,
            non-extensible classes)
          </li>
          <li>Watch the AI analysis appear within 2-3 minutes</li>
          <li>Follow the suggested fixes to improve your code</li>
        </ol>
        <p>
          <strong>Configuration:</strong> See
          <code>.github/workflows/ocp-check.yml</code>
        </p>
      </div>
    </div>
  </body>
</html>
